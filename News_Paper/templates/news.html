<!--  наследуемся от шаблона default.html, который мы создавали для flatpages -->
{% extends 'flatpages/default.html' %}

<!--Подключаем фильтров-->
{% load custom_filters %}
{% load custom_tags %}
{% load custom_censor %}

{% block title %} Post {% endblock title %}

{% block content %}
<br><h1> Все новости - {{ text|length }}</h1> <!-- Если в переменной text будет None,
то выведется указанный в фильтре текст
# Количество всех записей text|length -->


<!-- Вот так выглядело использование переменной и фильтра -->
<!-- <h3>{{ time_now|date:'M d Y' }}</h3> -->
<!-- А вот так мы используем наш тег-->
<!--<h3>{% current_time '%d %b %Y' %}</h3>-->
<br><h3>{{ time_now|date:'d M Y' }}</h3><br>

<hr><br>
{% if text %}
<table>
    <tr>
        <td> Заголовок</td>
        <td> Дата публикации</td>
        <td> Текст статьи</td>
    </tr>

    {% for t in text %}
    <tr>
        <td>{{ t.title|censor }}</td>
        <td>{{ t.dateCreation|date:'d M Y' }}</td>
        <td>{{ t.text|truncatechars:20|censor }}</td> <!-- первые 20 слов текста статьи  -->
        <td><a href='/news/{{ t.id }}'>Подробнее</a></td>
    </tr>
    {% endfor %}
</table><br><hr>
{% else %}
<h2>Новостей нет!</h2>
{% endif %}
{% endblock content %}